# ====== CATAI APP .HTACCESS (SPA + API isolation) ======
Options -Indexes
DirectoryIndex index.html

# Forzar UTF-8 para contenido est치tico y declarar idioma
AddDefaultCharset utf-8
AddType 'text/html; charset=UTF-8' .html .htm
AddType 'text/css; charset=UTF-8' .css
AddType 'application/javascript; charset=UTF-8' .js

<IfModule mod_headers.c>
  # Idioma por defecto de la app
  Header set Content-Language "es-US"
  # Evitar caches agresivos durante pruebas
  <FilesMatch "\.(html|htm|js|css)$">
    Header set Cache-Control "no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
</IfModule>

<IfModule mod_rewrite.c>
RewriteEngine On
# RewriteBase din치mico - detecta autom치ticamente la carpeta
RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::\2$
RewriteRule ^(.*) - [E=BASE:%1]

# 1) No tocar el backend: dejar pasar todo bajo /api/
RewriteRule ^api/ - [L]

# 2) Si el archivo o directorio existe, servirlo
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 3) SPA fallback: todo lo dem치s a index.html
RewriteRule ^ index.html [L]
</IfModule>
# ====== FIN CATAI .HTACCESS ======